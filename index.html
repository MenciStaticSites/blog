<!doctype html><html lang=zh-CN><head><title>Menci&#39;s Blog</title><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=author content=Menci><meta name=description content="A Blog Powered By Hexo"><meta name=keywords content=""><link rel=alternate type=application/atom+xml title="ATOM 1.0" href=/atom.xml><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=renderer content=webkit><meta name=theme-color content=#ffffff><link rel="shortcut icon" type=image/x-icon href=//static.cdn.menci.xyz/menci-blog/avatar.6e993e78.png crossorigin=anonymous><link rel=stylesheet href=//cdnjs.baoshuo.ren/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css crossorigin=anonymous><link rel=stylesheet href=//cdnjs.baoshuo.ren/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css crossorigin=anonymous><link rel=stylesheet href=//cdnjs.baoshuo.ren/ajax/libs/KaTeX/0.15.2/katex.min.css crossorigin=anonymous><link rel=stylesheet href=//static.cdn.menci.xyz/menci-blog/css/journal.b205a034.css crossorigin=anonymous><link rel=stylesheet href="//cdn.menci.xyz/fonts/css2?family=Noto+Sans+SC:wght@300%3B400%3B600&family=Source+Sans+Pro:wght@400%3B600&family=Lato:wght@400%3B500&family=Hind+Vadodara:wght@300%3B400&family=Montserrat&family=Fira+Code&family=Material+Icons&display=block" crossorigin=anonymous><script async data-domain=blog.men.ci src=//stat.u.sb/js/plausible.js></script><meta name=generator content="Hexo 7.3.0"></head><body><div id=top></div><div id=app><div class=single-column-drawer-container ref=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item active" href=https://blog.men.ci>首页 </a><a class="a-block false drawer-menu-item" href=/archives/ >归档 </a><a class="a-block false drawer-menu-item" href=/tags/ >标签 </a><a class="a-block false drawer-menu-item" href=/friends/ >朋友们 </a><a class="a-block false drawer-menu-item" href=/about-me/ >关于我</a></div></div></div><transition name=fade><div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav ref=navBar class="navbar navbar-light single-column-nav-container sticky-top"><div ref=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer><i class=material-icons>menu</i></button> <a ref=navTitle class=navbar-brand href=/ >Menci&#39;s Blog</a></div></nav><div class=single-column-header-container ref=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=/ ><div class=single-column-header-title>Menci's Blog</div><div class=single-column-header-subtitle>念念不忘，必有回响</div></a></div><div ref=sideContainer class=side-container><a class="a-block active nav-head" href=/ ><div class=nav-title>Menci's Blog</div><div class=nav-subtitle>念念不忘，必有回响</div></a><div class=nav-link-list><a class="a-block false nav-link-item" href=/archives/ >归档 </a><a class="a-block false nav-link-item" href=/tags/ >标签 </a><a class="a-block false nav-link-item" href=/friends/ >朋友们 </a><a class="a-block false nav-link-item" href=/about-me/ >关于我</a></div><div class=nav-footer>Powered by <a href=https://hexo.io/ target=_blank rel="noreferrer noopener">Hexo</a><br>Theme <a href=https://github.com/Menci/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal</a> by <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a><br>&copy; 2024 <a href=https://blog.men.ci>Menci<i class=material-icons>favorite</i></a></div></div><div ref=extraContainer class=extra-container><div class=pagination><a id=globalBackToTop class="animated-visibility pagination-action" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up</i></a></div></div><div ref=streamContainer class=stream-container><div class="post-list-container post-list-container-no-background"><a href=/cmcc-encrypted-pppoe-password/ class="a-block no-transition"><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>被加密的移动光猫 PPPoE 密码</div><div class=post-item-summary><p>最近帮朋友家新装的宽带配网时，登录超级管理员 CMCCAdmin 后，发现光猫管理页面上的 PPPoE 密码是 6 个 <code>*</code> 星号 —— 好在这台光猫不需要拆机就可以开启 Telnet，不需要大动干戈地拆机拿示波器去找 TTL 了。然而高兴了没多久，登录进 Telnet 之后才发现，虽然是熟悉的 <code>pppd</code> 拨号，但配置里的拨号密码被加密了……</p></div><div class=post-item-meta><time datetime=2024-11-27T16:00:00.000Z itemprop=datePublished>2024-11-28 </time>&nbsp; <i class=material-icons style="">label</i> <span>逆向</span>, <span>宽带</span>, <span>网络</span></div></div></div></div></a><a href=/how-does-kubectl-apply-merge/ class="a-block no-transition"><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>Kubernetes 是如何合并 YAML 配置的？</div><div class=post-item-summary><p>今天在更新一个以 StatefulSet 形式部署的服务时出现了一个诡异的问题：一个从 YAML 文件中被删掉的 <code>env</code> 环境变量，在应用 YAML 后的 StatefulSet 对象中仍然存在，导致 Pod 中的应用程序没有正常运行。</p><p>而出现问题的 StatefulSet 资源，唯一的不寻常之处是 —— 上次更新（<code class="punctuation-l punctuation-r">apply -f</code>）后进行了回滚（<code class="punctuation-l punctuation-r">rollout undo</code>）……</p></div><div class=post-item-meta><time datetime=2024-10-21T16:00:00.000Z itemprop=datePublished>2024-10-22 </time>&nbsp; <i class=material-icons style="">label</i> <span>SRE</span>, <span>云计算</span>, <span>Kubernetes</span></div></div></div></div></a><a href=/thanos-low-cost-metrics-on-homelab/ class="a-block no-transition"><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>使用 Thanos 低成本构建存储于 Homelab 上的多服务 Prometheus 监控</div><div class=post-item-summary><p>Prometheus 是很常用的服务指标监控系统。通过 Prometheus，我们将线上服务暴露的指标收集存储到时序数据库中，通过 PromQL 来查询，并在 Grafana 中展示。但是，使用小型 VPS 部署的个人项目而言，要在运行业务的同时运行这样一整服务监控系统，无论是长期储存时序数据所占用的磁盘空间，还是执行 PromQL 查询所占用的 CPU 资源，都太为难一台小型 VPS 了。</p><p>而相对的，家里 Homelab 服务器上有成本低廉的存储空间和计算资源，只是难以保证在线率，对 Metrics 这种需要不间断记录数据的场景不太适合 —— 如何才能将二者相结合，在 VPS 上实时收集自身服务的指标数据，同步到 Homelab 上进行储存和查询呢？</p></div><div class=post-item-meta><time datetime=2024-02-16T16:00:00.000Z itemprop=datePublished>2024-02-17 </time>&nbsp; <i class=material-icons style="">label</i> <span>Homelab</span>, <span>SRE</span>, <span>Metrics</span>, <span>Thanos</span>, <span>Prometheus</span></div></div><div class=post-item-image-wrapper><div class=post-item-image style="background-image: url('//static.cdn.menci.xyz/menci-blog/thanos-low-cost-metrics-on-homelab/banner.12da5bb3.svg')"></div></div></div></div></a><a href=/ipv6-slaac-relay-and-bridge/ class="a-block no-transition"><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>SLAAC 环境下的 IPv6 桥接与中继</div><div class=post-item-summary><p>IPv6 网络已经日渐普及，中国的绝大多数家庭宽带或校园网用户均可获得 IPv6 地址。对于手动组网的用户来说，可以使用与 IPv4 一样的方式，配置 IPv6 NAT 来让内网设备接入 IPv6 网络。但我们往往希望不使用 NAT，而是让内网设备可以获得全局可路由的公网 IPv6 地址。本文将从 IPv6 网络的原理入手，介绍如何配置 Linux 路由器，使得内网设备可以直接获得上层网络下发的 IPv6 地址，并同时使自定义路由与防火墙可用。</p></div><div class=post-item-meta><time datetime=2023-01-03T17:51:00.000Z itemprop=datePublished>2023-01-04 </time>&nbsp; <i class=material-icons style="">label</i> <span>网络</span>, <span>Linux</span>, <span>IPv6</span>, <span>防火墙</span>, <span>路由</span></div></div></div></div></a><a href=/luks-with-tpm2-secure-boot/ class="a-block no-transition"><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>基于 TPM 2.0 与 Secure Boot 的 LUKS 自动解密</div><div class=post-item-summary><p>为了保护用户数据，现代设备与操作系统往往都支持全盘加密的功能，其中最为典型的是 Microsoft Windows 的 BitLocker。它既可以对系统分区进行加密，又可以在确认引导过程可信的情况下，不需要用户交互即可自动解密，这利用到了 TPM 和 Secure Boot。而在 GNU/Linux 系统下，如果用常用的 LUKS 加密方案进行全盘加密，则需要在每次开机时输入密码。</p><p>本篇文章将参考 BitLocker 的做法，利用 Secure Boot 和 TPM 2.0 来实现 LUKS 全盘加密的自动解密。</p></div><div class=post-item-meta><time datetime=2022-12-02T16:27:00.000Z itemprop=datePublished>2022-12-03 </time>&nbsp; <i class=material-icons style="">label</i> <span>SRE</span>, <span>Linux</span>, <span>安全</span></div></div></div></div></a><a href=/backup-pve-with-pbs/ class="a-block no-transition"><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>使用 Proxmox Backup Server 备份 Proxmox VE 的客户机与宿主机</div><div class=post-item-summary><p>Proxmox VE 是一款功能强大且易于使用的虚拟化平台。在不依赖其它服务的情况下，Proxmox VE 即可设置灵活的备份策略，将客户机按时备份储存到指定的存储中。但 Proxmox VE 的一般备份方式不支持增量备份，也不支持备份宿主机本身。</p><p>本篇文章将介绍 Proxmox Backup Server 的安装与使用，它为 Proxmox VE 提供了增量备份、远程同步等高级功能。</p></div><div class=post-item-meta><time datetime=2022-11-11T18:43:00.000Z itemprop=datePublished>2022-11-12 </time>&nbsp; <i class=material-icons style="">label</i> <span>Homelab</span>, <span>Proxmox</span>, <span>SRE</span>, <span>虚拟化</span>, <span>备份</span></div></div><div class=post-item-image-wrapper><div class=post-item-image style="background-image: url('//static.cdn.menci.xyz/menci-blog/backup-pve-with-pbs/banner.96ffe5e2.svg')"></div></div></div></div></a><a href=/ssl-with-github-actions/ class="a-block no-transition"><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>使用 GitHub Actions 自动申请与部署 ACME SSL 证书</div><div class=post-item-summary><p>对于将 Web 服务部署在多个服务器与云服务的人来说，如何方便地申请并管理 SSL 证书，是一个值得思考的问题。我使用 GitHub Actions 来自动申请/续期 ACME SSL 证书，部署到各个云平台上，并在自己管理的服务器上定期拉取证书。</p></div><div class=post-item-meta><time datetime=2022-05-11T02:37:00.000Z itemprop=datePublished>2022-05-11 </time>&nbsp; <i class=material-icons style="">label</i> <span>SRE</span>, <span>云计算</span>, <span>CI / CD</span>, <span>SSL</span></div></div><div class=post-item-image-wrapper><div class=post-item-image style="background-image: url('//static.cdn.menci.xyz/menci-blog/ssl-with-github-actions/banner.1461080a.svg')"></div></div></div></div></a><a href=/x86-userland-and-syscall/ class="a-block no-transition"><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>在 x86 中实现用户态与系统调用</div><div class=post-item-summary><p>在现代操作系统中，应用程序的代码与内核代码的运行环境是隔离的，这被称为用户态与内核态。一般来说，用户态应用程序只能在进程内执行算法逻辑，无法直接访问内核态的数据，也无法执行操作硬件所需的特权指令，而是需要通过系统调用来与内核态交互，来执行各种对系统或硬件的操作。这样的设计保证操作系统可以对应用程序的行为有完全的控制，保障了系统的安全性与稳定性。</p></div><div class=post-item-meta><time datetime=2022-02-14T20:22:00.000Z itemprop=datePublished>2022-02-15 </time>&nbsp; <i class=material-icons style="">label</i> <span>x86</span>, <span>内核</span></div></div></div></div></a><a href=/mobile-security-compare/ class="a-block no-transition"><div class=post-item-wrapper><div class="post-item post-item-no-divider"><div class=post-item-info-wrapper><div class=post-item-title>Android 与 iOS 安全机制对比</div><div class=post-item-summary><p>本文曾为本人一门课程的期末报告，其中有些内容可能不够准确与全面，欢迎大家指正。</p><p>作为现代移动操作系统，Android 和 iOS 都有较为完善的安全机制。本文将从若干个方面分析对比其安全机制的异同。</p></div><div class=post-item-meta><time datetime=2022-02-02T13:21:00.000Z itemprop=datePublished>2022-02-02 </time>&nbsp; <i class=material-icons style="">label</i> <span>安全</span>, <span>Android</span>, <span>iOS</span></div></div></div></div></a></div><div class=single-column-footer>Powered by <a href=https://hexo.io/ target=_blank rel="noreferrer noopener">Hexo</a><br>Theme <a href=https://github.com/Menci/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal</a> by <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a><br>&copy; 2024 <a href=https://blog.men.ci>Menci<i class=material-icons>favorite</i></a></div></div></div><script src=//cdnjs.baoshuo.ren/ajax/libs/jquery/3.3.1/jquery.min.js crossorigin=anonymous></script><script src=//cdnjs.baoshuo.ren/ajax/libs/popper.js/1.14.4/umd/popper.min.js crossorigin=anonymous></script><script src=//cdnjs.baoshuo.ren/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js crossorigin=anonymous></script><script src=//cdnjs.baoshuo.ren/ajax/libs/vue/2.5.17/vue.min.js crossorigin=anonymous></script><script src=//cdnjs.baoshuo.ren/ajax/libs/smooth-scroll/14.2.1/smooth-scroll.min.js crossorigin=anonymous></script><script src=//cdnjs.baoshuo.ren/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js crossorigin=anonymous></script><script src=//static.cdn.menci.xyz/menci-blog/js/journal.bde01167.min.js crossorigin=anonymous></script><script>"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js?t=https%3A%2F%2Fstatic.cdn.menci.xyz%2Fmenci-blog%2F")}));</script></body></html>