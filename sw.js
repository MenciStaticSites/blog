var e=self,t=new URL(e.location.href).searchParams,n=t.get("t"),s=t.get("404");Promise.any||(Promise.any=e=>Promise.all([...e].map((e=>new Promise(((t,n)=>Promise.resolve(e).then(n,t)))))).then((e=>Promise.reject(e)),(e=>Promise.resolve(e)))),e.addEventListener("install",(t=>{t.waitUntil(e.skipWaiting())})),e.addEventListener("fetch",(t=>{const r=new URL(t.request.url);if("GET"!==t.request.method||r.origin!==e.origin)return;const a=new Event("abortFetch"),o=new EventTarget,i=e=>{const t="function"==typeof AbortController&&new AbortController;let n=!1;t&&o.addEventListener(a.type,(()=>{n||t.abort()}));const s=e(t?t.signal:void 0);return async(...e)=>{const t=await s(...e);if(t)return n=!0,o.dispatchEvent(a),t}},c=i((e=>async()=>await fetch(t.request,{signal:e}))),l=i((e=>async()=>{const t=n+r.pathname.slice(1)+r.search,a={redirect:"follow",signal:e};let o=await fetch(t,a);if(404===o.status&&s&&(o=await fetch(n+s,a)),!o.ok)throw null;return o}));t.respondWith(Promise.any([c(),l()]).then((async function(e){return"same-origin"===t.request.mode?new Response(e.body,{headers:e.headers,status:e.status,statusText:e.statusText}):e})))}));